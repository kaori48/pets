<!--部分テンプレいれる-->
<%= render 'layouts/side', user: @user ,applying: @applying %>
<%= render 'layouts/sidegenre', genres: @genres %>
<!--ブログ詳細-->
<%= @blog.title %><br>
<%= @blog.created_at.strftime("%Y年%m月%d日") %><br>
<%= attachment_image_tag @blog, :blog_image, size: "220x170",fallback: "no_image.jpg" %><br>
<!--登録されているジャンル一覧-->
<% @blog.genres.each do |genre|%>
      <%= link_to blog_genre_path(genre.id) do %>
        <%= genre.name %>
      <% end %>
<% end %><br>
<%= @blog.body %><br>
コメント数：<%= @blog.blog_comments.count %><!--コメント数-->


<% if user_signed_in? %><!-- ログインしている場合にいいねできる -->
<!--いいね-->
    <% if @blog.favorited_by?(current_user) %>
        <!--いいねあり、削除リンク-->
        <%= link_to blog_favorites_path(@blog), method: :delete do %>
            <%= @blog.favorites.count %>いいね<!--いいねボタン、いいね数-->
        <% end %>
    <% else %>
    <!--いいねなし、追加リンク-->
        <%= link_to blog_favorites_path(@blog), method: :post do %>
            <%= @blog.favorites.count %>いいね<!--いいねボタン、いいね数-->
        <% end %>
    <% end %>
<% else %>
    <%= blog_favorites_path(@blog) %>いいね
<% end %>


<!--ブログ削除、編集,後で成功、確認メッセとかもいれる-->
<% if @blog.user == current_user %><!--後々管理者もできるようにする-->
    <%= link_to"編集", edit_blog_path(@blog.id) %>
        <%= link_to"削除", blog_path(@blog.id),method: :delete, data: {confirm: "本当に消しますか？"} %>
    <% end %>
<%= link_to "index", blogs_path %>

<!--コメント投稿-->
<% if user_signed_in? %><!-- ログインしている場合のみコメントできる -->
    <%= form_for [@blog,@comment] do |f| %><!--後々マイページに飛ばす-->
        <%= f.text_area :comment,placeholder: "comment" %>
        <%= f.submit"送信" %>
    <% end %>
<% end %>

<!--コメント一覧-->
<% @comments.each do |comment| %>
   <%= link_to user_path(comment.user.id) do %>
       <%= attachment_image_tag comment.user, :icon, size: "40x40", fallback: "no_image.jpg" %><br>
       <%= comment.user.name %>
   <% end %>
   <%= comment.comment %>
   <%= comment.user.created_at.strftime("%Y年%m月%d日") %>
   <% if comment.user_id == current_user.id %><!--後々管理者も削除できるように-->
   	  <%= link_to "削除", blog_blog_comments_path(comment.id), method: :delete, data: {confirm: "本当に消しますか？"} %>
   <% end %><br>
<% end %>


<h1>Blogs#show</h1>
<p>Find me in app/views/blogs/show.html.erb</p>
